{
  "name": "ğŸ¤– AI Customer Service Agent - Complete",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-customer-service",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "webhook-main",
      "name": "ğŸŒ Webhook - Customer Request",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 400],
      "webhookId": "ai-customer-service"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-voice-agent",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "webhook-voice",
      "name": "ğŸ“ Webhook - Voice (Vapi)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 600],
      "webhookId": "ai-voice-agent"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-sms-agent",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "webhook-sms",
      "name": "ğŸ“± Webhook - SMS (Yuboto)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 800],
      "webhookId": "ai-sms-agent"
    },
    {
      "parameters": {
        "jsCode": "// Normalize input from all channels\nconst input = $input.first().json;\n\nlet channel = 'chat';\nlet customerMessage = '';\nlet customerId = '';\nlet customerPhone = '';\nlet customerEmail = '';\nlet sessionId = '';\nlet metadata = {};\n\n// Detect channel and extract data\nif (input.message?.type === 'voice' || input.call) {\n  // Vapi Voice\n  channel = 'voice';\n  customerMessage = input.message?.content || input.transcript || '';\n  customerPhone = input.call?.customer?.number || input.phone || '';\n  sessionId = input.call?.id || input.session_id || '';\n  metadata = { call_id: input.call?.id };\n} else if (input.sms || input.from_number) {\n  // SMS from Yuboto\n  channel = 'sms';\n  customerMessage = input.sms?.text || input.message || input.text || '';\n  customerPhone = input.sms?.from || input.from_number || '';\n  sessionId = input.message_id || '';\n} else {\n  // Chat widget / API\n  channel = 'chat';\n  customerMessage = input.message || input.query || input.text || '';\n  customerId = input.customer_id || input.user_id || '';\n  customerEmail = input.email || '';\n  customerPhone = input.phone || '';\n  sessionId = input.session_id || input.conversation_id || '';\n}\n\n// Extract potential order number from message\nconst orderMatch = customerMessage.match(/#?(\\d{4,})/)\nconst potentialOrderNumber = orderMatch ? orderMatch[1] : null;\n\n// Extract potential product SKU\nconst skuMatch = customerMessage.match(/SKU[:\\s]*(\\w+)/i);\nconst potentialSKU = skuMatch ? skuMatch[1] : null;\n\nreturn {\n  json: {\n    channel,\n    customerMessage,\n    customerId,\n    customerPhone,\n    customerEmail,\n    sessionId,\n    potentialOrderNumber,\n    potentialSKU,\n    metadata,\n    timestamp: new Date().toISOString(),\n    language: 'el' // Default Greek\n  }\n};"
      },
      "id": "normalize-input",
      "name": "ğŸ”„ Normalize Input",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [500, 600]
    },
    {
      "parameters": {
        "agent": "toolsAgent",
        "promptType": "define",
        "text": "={{ $json.customerMessage }}",
        "options": {
          "systemMessage": "Î•Î¯ÏƒÎ±Î¹ Î¿ AI Î’Î¿Î·Î¸ÏŒÏ‚ Î•Î¾Ï…Ï€Î·ÏÎ­Ï„Î·ÏƒÎ·Ï‚ Î ÎµÎ»Î±Ï„ÏÎ½ Î³Î¹Î± Ï„Î¿ Î·Î»ÎµÎºÏ„ÏÎ¿Î½Î¹ÎºÏŒ Î¼Î±Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±. \n\n## ÎŸÎ”Î—Î“Î™Î•Î£\n\n### Î“Î»ÏÏƒÏƒÎ±\n- Î‘Ï€Î¬Î½Ï„Î± Î Î‘ÎÎ¤Î‘ ÏƒÏ„Î± Î•Î»Î»Î·Î½Î¹ÎºÎ¬ ÎµÎºÏ„ÏŒÏ‚ Î±Î½ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Î³ÏÎ¬ÏˆÎµÎ¹ ÏƒÎµ Î¬Î»Î»Î· Î³Î»ÏÏƒÏƒÎ±\n- ÎÎ± ÎµÎ¯ÏƒÎ±Î¹ Ï†Î¹Î»Î¹ÎºÏŒÏ‚, ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÏŒÏ‚ ÎºÎ±Î¹ Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î±Ï„Î¹ÎºÏŒÏ‚\n- Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÎµÏ…Î³ÎµÎ½Î¹ÎºÏŒ ÏÏ†Î¿Ï‚ Î±Î»Î»Î¬ ÏŒÏ‡Î¹ Ï…Ï€ÎµÏÎ²Î¿Î»Î¹ÎºÎ¬ Ï„Ï…Ï€Î¹ÎºÏŒ\n\n### Î”Ï…Î½Î±Ï„ÏŒÏ„Î·Ï„ÎµÏ‚\nÎœÏ€Î¿ÏÎµÎ¯Ï‚ Î½Î± Î²Î¿Î·Î¸Î®ÏƒÎµÎ¹Ï‚ Ï„Î¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ Î¼Îµ:\n1. **ÎˆÎ»ÎµÎ³Ï‡Î¿ Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚** - Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ check_stock tool\n2. **Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚** - Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ track_order tool\n3. **Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Ï‰Î½** - Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ search_products tool\n4. **Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Ï„Î¹Î¼ÏÎ½** - Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ get_product_info tool\n5. **Î‘Î¯Ï„Î·Î¼Î± ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚** - Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ create_return_request tool\n6. **Î•Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚** - Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î¿ set_stock_alert tool\n\n### ÎšÎ±Î½ÏŒÎ½ÎµÏ‚\n- Î Î‘ÎÎ¤Î‘ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ Ï„Î± tools Î³Î¹Î± Î½Î± Ï€Î¬ÏÎµÎ¹Ï‚ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ¬ Î´ÎµÎ´Î¿Î¼Î­Î½Î±\n- ÎœÎ—Î ÎµÏ€Î¹Î½Î¿ÎµÎ¯Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î³Î¹Î± stock, Ï„Î¹Î¼Î­Ï‚ Î® Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚\n- Î‘Î½ Î´ÎµÎ½ Î¼Ï€Î¿ÏÎµÎ¯Ï‚ Î½Î± Î²Î¿Î·Î¸Î®ÏƒÎµÎ¹Ï‚, Ï€ÏÏŒÏ„ÎµÎ¹Î½Îµ ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼Îµ Î±Î½Î¸ÏÏÏ€Î¹Î½Î¿ agent\n- Î“Î¹Î± Ï€Î¿Î»ÏÏ€Î»Î¿ÎºÎ± Î¸Î­Î¼Î±Ï„Î±, Î¶Î®Ï„Î± email/Ï„Î·Î»Î­Ï†Ï‰Î½Î¿ Î³Î¹Î± callback\n\n### Context\n- Channel: {{ $json.channel }}\n- Customer Phone: {{ $json.customerPhone }}\n- Customer Email: {{ $json.customerEmail }}\n- Potential Order #: {{ $json.potentialOrderNumber }}\n- Session: {{ $json.sessionId }}"
        }
      },
      "id": "ai-agent",
      "name": "ğŸ§  AI Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.6,
      "position": [800, 600]
    },
    {
      "parameters": {
        "model": "claude-sonnet-4-20250514",
        "options": {
          "temperature": 0.3,
          "maxTokens": 1024
        }
      },
      "id": "anthropic-model",
      "name": "Claude Sonnet",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.2,
      "position": [600, 800],
      "credentials": {
        "anthropicApi": {
          "id": "ANTHROPIC_CREDENTIAL_ID",
          "name": "Anthropic API"
        }
      }
    },
    {
      "parameters": {
        "name": "check_stock",
        "description": "Î•Î»Î­Î³Ï‡ÎµÎ¹ Ï„Î· Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î± (stock) ÎµÎ½ÏŒÏ‚ Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ ÏÏ‰Ï„Î¬ÎµÎ¹ Î±Î½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ ÎºÎ¬Ï„Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿, Ï€ÏŒÏƒÎ± ÎºÎ¿Î¼Î¼Î¬Ï„Î¹Î± Î­Ï‡ÎµÏ„Îµ, Î±Î½ ÎµÎ¯Î½Î±Î¹ ÏƒÎµ stock ÎºÎ»Ï€.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "product_identifier",
              "description": "Î¤Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Ï… Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚, SKU, Î® ID. ÎœÏ€Î¿ÏÎµÎ¯ Î½Î± ÎµÎ¯Î½Î±Î¹ Î¼ÎµÏÎ¹ÎºÏŒ ÏŒÎ½Î¿Î¼Î±.",
              "type": "string",
              "required": true
            }
          ]
        }
      },
      "id": "tool-check-stock",
      "name": "ğŸ”§ Tool: Check Stock",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [750, 850]
    },
    {
      "parameters": {
        "name": "track_order",
        "description": "Î’ÏÎ¯ÏƒÎºÎµÎ¹ Ï„Î·Î½ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î¼Î¹Î±Ï‚ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ ÏÏ‰Ï„Î¬ÎµÎ¹ Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ Î· Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Ï„Î¿Ï…, Ï„Î¹ Î³Î¯Î½ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î·Î½ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±, Ï€ÏŒÏ„Îµ Î¸Î± Ï€Î±ÏÎ±Î´Î¿Î¸ÎµÎ¯ ÎºÎ»Ï€.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "order_number",
              "description": "ÎŸ Î±ÏÎ¹Î¸Î¼ÏŒÏ‚ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚ (Ï€.Ï‡. 12345)",
              "type": "string",
              "required": true
            },
            {
              "name": "customer_email",
              "description": "Email Ï€ÎµÎ»Î¬Ï„Î· Î³Î¹Î± ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)",
              "type": "string",
              "required": false
            }
          ]
        }
      },
      "id": "tool-track-order",
      "name": "ğŸ”§ Tool: Track Order",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [900, 850]
    },
    {
      "parameters": {
        "name": "search_products",
        "description": "Î‘Î½Î±Î¶Î·Ï„Î¬ Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î± ÏƒÏ„Î¿ ÎºÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ ÏˆÎ¬Ï‡Î½ÎµÎ¹ Î³Î¹Î± ÎºÎ¬Ï„Î¹ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿, Î¸Î­Î»ÎµÎ¹ Î½Î± Î´ÎµÎ¹ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚, ÏÏ‰Ï„Î¬ÎµÎ¹ Ï„Î¹ Î­Ï‡ÎµÏ„Îµ ÏƒÎµ ÎºÎ¬Ï€Î¿Î¹Î± ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "search_query",
              "description": "Î¤Î¹ ÏˆÎ¬Ï‡Î½ÎµÎ¹ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ (Ï€.Ï‡. 'laptop gaming', 'ÎºÎ¹Î½Î·Ï„ÏŒ samsung')",
              "type": "string",
              "required": true
            },
            {
              "name": "category",
              "description": "ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚ (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)",
              "type": "string",
              "required": false
            },
            {
              "name": "max_price",
              "description": "ÎœÎ­Î³Î¹ÏƒÏ„Î· Ï„Î¹Î¼Î® budget (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)",
              "type": "number",
              "required": false
            },
            {
              "name": "min_price",
              "description": "Î•Î»Î¬Ï‡Î¹ÏƒÏ„Î· Ï„Î¹Î¼Î® (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)",
              "type": "number",
              "required": false
            }
          ]
        }
      },
      "id": "tool-search-products",
      "name": "ğŸ”§ Tool: Search Products",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [1050, 850]
    },
    {
      "parameters": {
        "name": "get_product_info",
        "description": "Î Î±Î¯ÏÎ½ÎµÎ¹ Î±Î½Î±Î»Ï…Ï„Î¹ÎºÎ­Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î³Î¹Î± Î­Î½Î± ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿ Ï€ÏÎ¿ÏŠÏŒÎ½ (Ï„Î¹Î¼Î®, Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î®, Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬, Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±). Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Î¸Î­Î»ÎµÎ¹ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î³Î¹Î± Î­Î½Î± Ï€ÏÎ¿ÏŠÏŒÎ½.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "product_id",
              "description": "Î¤Î¿ ID Î® SKU Ï„Î¿Ï… Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚",
              "type": "string",
              "required": true
            }
          ]
        }
      },
      "id": "tool-product-info",
      "name": "ğŸ”§ Tool: Get Product Info",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [750, 950]
    },
    {
      "parameters": {
        "name": "create_return_request",
        "description": "Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ Î±Î¯Ï„Î·Î¼Î± ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚ Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Î¸Î­Î»ÎµÎ¹ Î½Î± ÎµÏ€Î¹ÏƒÏ„ÏÎ­ÏˆÎµÎ¹ ÎºÎ¬Ï„Î¹, Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ ÎµÏ…Ï‡Î±ÏÎ¹ÏƒÏ„Î·Î¼Î­Î½Î¿Ï‚, Î¸Î­Î»ÎµÎ¹ Î±Î½Ï„Î¹ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "order_number",
              "description": "Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚",
              "type": "string",
              "required": true
            },
            {
              "name": "reason",
              "description": "Î›ÏŒÎ³Î¿Ï‚ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚",
              "type": "string",
              "required": true
            },
            {
              "name": "product_sku",
              "description": "SKU Ï„Î¿Ï… Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚ Ï€ÏÎ¿Ï‚ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î® (Î±Î½ ÎµÎ¯Î½Î±Î¹ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿)",
              "type": "string",
              "required": false
            },
            {
              "name": "customer_email",
              "description": "Email Ï€ÎµÎ»Î¬Ï„Î· Î³Î¹Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±",
              "type": "string",
              "required": true
            }
          ]
        }
      },
      "id": "tool-return-request",
      "name": "ğŸ”§ Tool: Create Return",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [900, 950]
    },
    {
      "parameters": {
        "name": "set_stock_alert",
        "description": "Î•Î³Î³ÏÎ¬Ï†ÎµÎ¹ Ï„Î¿Î½ Ï€ÎµÎ»Î¬Ï„Î· Î³Î¹Î± ÎµÎ¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· ÏŒÏ„Î±Î½ Î­Î½Î± Ï€ÏÎ¿ÏŠÏŒÎ½ Î³Î¯Î½ÎµÎ¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ ÎºÎ¬Ï„Î¹ Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ ÎºÎ±Î¹ Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Î¸Î­Î»ÎµÎ¹ Î½Î± ÎµÎ½Î·Î¼ÎµÏÏ‰Î¸ÎµÎ¯.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "product_id",
              "description": "ID Î® SKU Ï„Î¿Ï… Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚",
              "type": "string",
              "required": true
            },
            {
              "name": "customer_email",
              "description": "Email Î³Î¹Î± Ï„Î·Î½ ÎµÎ¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ·",
              "type": "string",
              "required": false
            },
            {
              "name": "customer_phone",
              "description": "Î¤Î·Î»Î­Ï†Ï‰Î½Î¿ Î³Î¹Î± SMS ÎµÎ¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ·",
              "type": "string",
              "required": false
            }
          ]
        }
      },
      "id": "tool-stock-alert",
      "name": "ğŸ”§ Tool: Stock Alert",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [1050, 950]
    },
    {
      "parameters": {
        "name": "transfer_to_human",
        "description": "ÎœÎµÏ„Î±Ï†Î­ÏÎµÎ¹ Ï„Î· ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î± ÏƒÎµ Î±Î½Î¸ÏÏÏ€Î¹Î½Î¿ agent. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·ÏƒÎµ ÏŒÏ„Î±Î½ Ï„Î¿ Î¸Î­Î¼Î± ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»ÏÏ€Î»Î¿ÎºÎ¿, Î¿ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ ÎµÎ¯Î½Î±Î¹ Î´Ï…ÏƒÎ±ÏÎµÏƒÏ„Î·Î¼Î­Î½Î¿Ï‚, Î® Î¶Î·Ï„Î¬ÎµÎ¹ ÏÎ·Ï„Î¬ Î½Î± Î¼Î¹Î»Î®ÏƒÎµÎ¹ Î¼Îµ Î¬Î½Î¸ÏÏ‰Ï€Î¿.",
        "workflowId": "={{ $workflow.id }}",
        "fields": {
          "values": [
            {
              "name": "reason",
              "description": "Î›ÏŒÎ³Î¿Ï‚ Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¬Ï‚",
              "type": "string",
              "required": true
            },
            {
              "name": "priority",
              "description": "Î ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±: low, medium, high, urgent",
              "type": "string",
              "required": false
            },
            {
              "name": "summary",
              "description": "Î ÎµÏÎ¯Î»Î·ÏˆÎ· Ï„Î·Ï‚ ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚ Î¼Î­Ï‡ÏÎ¹ Ï„ÏÏÎ±",
              "type": "string",
              "required": true
            }
          ]
        }
      },
      "id": "tool-human-transfer",
      "name": "ğŸ”§ Tool: Human Transfer",
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 1.1,
      "position": [1200, 850]
    },
    {
      "parameters": {
        "memory": "windowBufferMemory",
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.sessionId || $json.customerPhone || 'default' }}"
      },
      "id": "memory",
      "name": "ğŸ’¾ Chat Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.2,
      "position": [600, 900]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "chat",
              "leftValue": "={{ $('ğŸ”„ Normalize Input').item.json.channel }}",
              "rightValue": "chat",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "voice",
              "leftValue": "={{ $('ğŸ”„ Normalize Input').item.json.channel }}",
              "rightValue": "voice",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "sms",
              "leftValue": "={{ $('ğŸ”„ Normalize Input').item.json.channel }}",
              "rightValue": "sms",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        }
      },
      "id": "route-response",
      "name": "ğŸ”€ Route by Channel",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3,
      "position": [1100, 600]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"success\": true,\n  \"response\": \"{{ $('ğŸ§  AI Agent').item.json.output }}\",\n  \"session_id\": \"{{ $('ğŸ”„ Normalize Input').item.json.sessionId }}\",\n  \"channel\": \"chat\",\n  \"timestamp\": \"{{ $now.toISO() }}\"\n}",
        "options": {}
      },
      "id": "respond-chat",
      "name": "ğŸ“¤ Respond Chat",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1350, 450]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"assistant\": {\n    \"content\": \"{{ $('ğŸ§  AI Agent').item.json.output }}\",\n    \"endCall\": false\n  }\n}",
        "options": {}
      },
      "id": "respond-voice",
      "name": "ğŸ“¤ Respond Voice (Vapi)",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1350, 600]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://omni.yuboto.com/api/v1/send",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $credentials.yubotoApi.apiKey }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"to\": \"{{ $('ğŸ”„ Normalize Input').item.json.customerPhone }}\",\n  \"text\": \"{{ $('ğŸ§  AI Agent').item.json.output.substring(0, 160) }}\",\n  \"from\": \"ESHOP\"\n}",
        "options": {}
      },
      "id": "send-sms",
      "name": "ğŸ“± Send SMS Response",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1350, 750]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"success\": true,\n  \"sms_sent\": true\n}",
        "options": {}
      },
      "id": "respond-sms",
      "name": "ğŸ“¤ Respond SMS Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [1550, 750]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://hooks.slack.com/services/YOUR_SLACK_WEBHOOK",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"text\": \"ğŸ†• ÎÎ­Î± ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î± AI Agent\",\n  \"blocks\": [\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*Channel:* {{ $('ğŸ”„ Normalize Input').item.json.channel }}\\n*Customer:* {{ $('ğŸ”„ Normalize Input').item.json.customerPhone || $('ğŸ”„ Normalize Input').item.json.customerEmail || 'Unknown' }}\\n*Message:* {{ $('ğŸ”„ Normalize Input').item.json.customerMessage }}\\n*AI Response:* {{ $('ğŸ§  AI Agent').item.json.output.substring(0, 500) }}\"\n      }\n    }\n  ]\n}",
        "options": {}
      },
      "id": "log-slack",
      "name": "ğŸ“ Log to Slack",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1350, 900]
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "YOUR_GOOGLE_SHEET_ID"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Conversations"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $now.toISO() }}",
            "Channel": "={{ $('ğŸ”„ Normalize Input').item.json.channel }}",
            "Customer": "={{ $('ğŸ”„ Normalize Input').item.json.customerPhone || $('ğŸ”„ Normalize Input').item.json.customerEmail }}",
            "Message": "={{ $('ğŸ”„ Normalize Input').item.json.customerMessage }}",
            "AI Response": "={{ $('ğŸ§  AI Agent').item.json.output }}",
            "Session ID": "={{ $('ğŸ”„ Normalize Input').item.json.sessionId }}"
          }
        },
        "options": {}
      },
      "id": "log-sheets",
      "name": "ğŸ“Š Log to Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.4,
      "position": [1350, 1050],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "GOOGLE_CREDENTIAL_ID",
          "name": "Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-check-stock",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-stock",
      "name": "âš¡ Sub: Check Stock Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 1200],
      "webhookId": "tool-check-stock"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $credentials.woocommerceApi.url }}/wp-json/wc/v3/products",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "search",
              "value": "={{ $json.body.product_identifier }}"
            },
            {
              "name": "per_page",
              "value": "5"
            },
            {
              "name": "status",
              "value": "publish"
            }
          ]
        },
        "options": {}
      },
      "id": "woo-search-stock",
      "name": "ğŸ›’ WooCommerce: Search Products",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [450, 1200],
      "credentials": {
        "httpBasicAuth": {
          "id": "WOO_CREDENTIAL_ID",
          "name": "WooCommerce API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const products = $input.first().json;\n\nif (!products || products.length === 0) {\n  return {\n    json: {\n      found: false,\n      message: \"Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÏÎ¿ÏŠÏŒÎ½ Î¼Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ ÏŒÎ½Î¿Î¼Î±. ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÏ„Îµ Î¼Îµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÏŒ ÏŒÎ½Î¿Î¼Î± Î® Î½Î± Ï€ÎµÏÎ¹Î³ÏÎ¬ÏˆÎµÏ„Îµ Ï„Î¹ ÏˆÎ¬Ï‡Î½ÎµÏ„Îµ.\"\n    }\n  };\n}\n\nconst results = products.map(p => ({\n  id: p.id,\n  name: p.name,\n  sku: p.sku || 'N/A',\n  price: p.price + 'â‚¬',\n  regular_price: p.regular_price + 'â‚¬',\n  stock_status: p.stock_status,\n  stock_quantity: p.stock_quantity || 0,\n  in_stock: p.stock_status === 'instock',\n  backorders_allowed: p.backorders !== 'no',\n  manage_stock: p.manage_stock\n}));\n\nconst inStockProducts = results.filter(p => p.in_stock);\nconst outOfStock = results.filter(p => !p.in_stock);\n\nlet message = '';\n\nif (inStockProducts.length > 0) {\n  message = `âœ… Î’ÏÎ­Î¸Î·ÎºÎ±Î½ ${inStockProducts.length} Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î±:\\n`;\n  inStockProducts.forEach(p => {\n    message += `\\nâ€¢ **${p.name}** (${p.sku})\\n  Î¤Î¹Î¼Î®: ${p.price}${p.stock_quantity ? ` | Stock: ${p.stock_quantity} Ï„ÎµÎ¼Î¬Ï‡Î¹Î±` : ' | Î£Îµ stock'}\\n`;\n  });\n}\n\nif (outOfStock.length > 0) {\n  message += `\\nâŒ ÎœÎ· Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î±: ${outOfStock.map(p => p.name).join(', ')}`;\n}\n\nreturn {\n  json: {\n    found: true,\n    total_results: results.length,\n    in_stock_count: inStockProducts.length,\n    products: results,\n    message: message\n  }\n};"
      },
      "id": "format-stock-response",
      "name": "ğŸ“‹ Format Stock Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 1200]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {}
      },
      "id": "respond-stock-tool",
      "name": "ğŸ“¤ Respond Stock Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 1200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-track-order",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-order",
      "name": "âš¡ Sub: Track Order Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 1400],
      "webhookId": "tool-track-order"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $credentials.woocommerceApi.url }}/wp-json/wc/v3/orders/{{ $json.body.order_number }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "woo-get-order",
      "name": "ğŸ›’ WooCommerce: Get Order",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [450, 1400],
      "credentials": {
        "httpBasicAuth": {
          "id": "WOO_CREDENTIAL_ID",
          "name": "WooCommerce API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\n\nif (response.statusCode === 404 || !response.body || response.body.code === 'woocommerce_rest_shop_order_invalid_id') {\n  return {\n    json: {\n      found: false,\n      message: \"âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î¼Îµ Î±Ï…Ï„ÏŒÎ½ Ï„Î¿Î½ Î±ÏÎ¹Î¸Î¼ÏŒ. Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î¿Î½ Î±ÏÎ¹Î¸Î¼ÏŒ ÎºÎ±Î¹ Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î¾Î±Î½Î¬.\"\n    }\n  };\n}\n\nconst order = response.body;\n\n// Status translations\nconst statusMap = {\n  'pending': 'â³ Î•ÎºÎºÏÎµÎ¼ÎµÎ¯ Ï€Î»Î·ÏÏ‰Î¼Î®',\n  'processing': 'ğŸ“¦ Î£Îµ ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±',\n  'on-hold': 'â¸ï¸ Î£Îµ Î±Î½Î±Î¼Î¿Î½Î®',\n  'completed': 'âœ… ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ',\n  'cancelled': 'âŒ Î‘ÎºÏ…ÏÏÎ¸Î·ÎºÎµ',\n  'refunded': 'ğŸ’° Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® Ï‡ÏÎ·Î¼Î¬Ï„Ï‰Î½',\n  'failed': 'âŒ Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î±',\n  'shipped': 'ğŸšš Î‘Ï€ÎµÏƒÏ„Î¬Î»Î·',\n  'delivered': 'ğŸ“¬ Î Î±ÏÎ±Î´ÏŒÎ¸Î·ÎºÎµ'\n};\n\nconst status = statusMap[order.status] || order.status;\n\n// Format items\nconst items = order.line_items.map(item => \n  `â€¢ ${item.name} x${item.quantity} - ${item.total}â‚¬`\n).join('\\n');\n\n// Shipping info\nconst shipping = order.shipping || {};\nconst shippingAddress = [shipping.address_1, shipping.city, shipping.postcode].filter(Boolean).join(', ');\n\n// Tracking (if available via meta)\nconst trackingMeta = order.meta_data?.find(m => m.key === '_tracking_number' || m.key === 'tracking_number');\nconst trackingNumber = trackingMeta?.value || null;\n\nlet message = `ğŸ“¦ **Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± #${order.id}**\\n\\n`;\nmessage += `**ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·:** ${status}\\n`;\nmessage += `**Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±:** ${new Date(order.date_created).toLocaleDateString('el-GR')}\\n`;\nmessage += `**Î£ÏÎ½Î¿Î»Î¿:** ${order.total}â‚¬\\n\\n`;\nmessage += `**Î ÏÎ¿ÏŠÏŒÎ½Ï„Î±:**\\n${items}\\n\\n`;\n\nif (shippingAddress) {\n  message += `**Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· Î±Ï€Î¿ÏƒÏ„Î¿Î»Î®Ï‚:** ${shippingAddress}\\n`;\n}\n\nif (trackingNumber) {\n  message += `\\nğŸšš **Tracking Number:** ${trackingNumber}`;\n}\n\nif (order.status === 'processing') {\n  message += `\\n\\nâ„¹ï¸ Î— Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± ÏƒÎ±Ï‚ ÎµÏ„Î¿Î¹Î¼Î¬Î¶ÎµÏ„Î±Î¹ ÎºÎ±Î¹ Î¸Î± Î±Ï€Î¿ÏƒÏ„Î±Î»ÎµÎ¯ ÏƒÏÎ½Ï„Î¿Î¼Î±!`;\n} else if (order.status === 'completed' || order.status === 'shipped') {\n  message += `\\n\\nğŸ“¬ Î— Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± ÏƒÎ±Ï‚ Î­Ï‡ÎµÎ¹ Î±Ï€Î¿ÏƒÏ„Î±Î»ÎµÎ¯! Î‘Î½Î±Î¼Î­Î½ÎµÏ„Îµ Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ· ÎµÎ½Ï„ÏŒÏ‚ 1-3 ÎµÏÎ³Î¬ÏƒÎ¹Î¼Ï‰Î½ Î·Î¼ÎµÏÏÎ½.`;\n}\n\nreturn {\n  json: {\n    found: true,\n    order_id: order.id,\n    status: order.status,\n    status_display: status,\n    total: order.total,\n    date: order.date_created,\n    items: order.line_items.length,\n    tracking_number: trackingNumber,\n    message: message\n  }\n};"
      },
      "id": "format-order-response",
      "name": "ğŸ“‹ Format Order Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 1400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {}
      },
      "id": "respond-order-tool",
      "name": "ğŸ“¤ Respond Order Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 1400]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-search-products",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-search",
      "name": "âš¡ Sub: Search Products Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 1600],
      "webhookId": "tool-search-products"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $credentials.woocommerceApi.url }}/wp-json/wc/v3/products",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "search",
              "value": "={{ $json.body.search_query }}"
            },
            {
              "name": "per_page",
              "value": "10"
            },
            {
              "name": "status",
              "value": "publish"
            },
            {
              "name": "orderby",
              "value": "popularity"
            },
            {
              "name": "min_price",
              "value": "={{ $json.body.min_price || '' }}"
            },
            {
              "name": "max_price",
              "value": "={{ $json.body.max_price || '' }}"
            }
          ]
        },
        "options": {}
      },
      "id": "woo-search-products",
      "name": "ğŸ›’ WooCommerce: Search Catalog",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [450, 1600],
      "credentials": {
        "httpBasicAuth": {
          "id": "WOO_CREDENTIAL_ID",
          "name": "WooCommerce API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const products = $input.first().json;\n\nif (!products || products.length === 0) {\n  return {\n    json: {\n      found: false,\n      message: \"ğŸ” Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î± Î¼Îµ Î±Ï…Ï„Î¬ Ï„Î± ÎºÏÎ¹Ï„Î®ÏÎ¹Î±. Î”Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î¼Îµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¿ÏÏ‚ ÏŒÏÎ¿Ï…Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚.\"\n    }\n  };\n}\n\nconst results = products.map((p, index) => ({\n  position: index + 1,\n  id: p.id,\n  name: p.name,\n  sku: p.sku || 'N/A',\n  price: p.price,\n  regular_price: p.regular_price,\n  sale_price: p.sale_price,\n  on_sale: p.on_sale,\n  stock_status: p.stock_status,\n  in_stock: p.stock_status === 'instock',\n  short_description: p.short_description?.replace(/<[^>]*>/g, '').substring(0, 100) || '',\n  categories: p.categories?.map(c => c.name).join(', ') || '',\n  permalink: p.permalink,\n  images: p.images?.[0]?.src || null\n}));\n\nlet message = `ğŸ” **Î’ÏÎ­Î¸Î·ÎºÎ±Î½ ${results.length} Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î±:**\\n\\n`;\n\nresults.forEach(p => {\n  const priceDisplay = p.on_sale \n    ? `~~${p.regular_price}â‚¬~~ **${p.sale_price}â‚¬** ğŸ·ï¸`\n    : `${p.price}â‚¬`;\n  \n  const stockIcon = p.in_stock ? 'âœ…' : 'âŒ';\n  \n  message += `**${p.position}. ${p.name}**\\n`;\n  message += `   Î¤Î¹Î¼Î®: ${priceDisplay} | ${stockIcon} ${p.in_stock ? 'Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿' : 'Î•Î¾Î±Î½Ï„Î»Î®Î¸Î·ÎºÎµ'}\\n`;\n  if (p.short_description) {\n    message += `   ${p.short_description}...\\n`;\n  }\n  message += `\\n`;\n});\n\nmessage += `\\nğŸ’¡ Î“Î¹Î± Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚, Ï€ÎµÎ¯Ï„Îµ Î¼Î¿Ï… Ï„Î¿Î½ Î±ÏÎ¹Î¸Î¼ÏŒ Ï„Î¿Ï… Ï€ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚ Ï€Î¿Ï… ÏƒÎ±Ï‚ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎµÎ¹.`;\n\nreturn {\n  json: {\n    found: true,\n    total_results: results.length,\n    products: results,\n    message: message\n  }\n};"
      },
      "id": "format-search-response",
      "name": "ğŸ“‹ Format Search Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 1600]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {}
      },
      "id": "respond-search-tool",
      "name": "ğŸ“¤ Respond Search Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 1600]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-get-product-info",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-product-info",
      "name": "âš¡ Sub: Get Product Info Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 1800],
      "webhookId": "tool-get-product-info"
    },
    {
      "parameters": {
        "method": "GET",
        "url": "={{ $credentials.woocommerceApi.url }}/wp-json/wc/v3/products/{{ $json.body.product_id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "options": {}
      },
      "id": "woo-get-product",
      "name": "ğŸ›’ WooCommerce: Get Product",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [450, 1800],
      "credentials": {
        "httpBasicAuth": {
          "id": "WOO_CREDENTIAL_ID",
          "name": "WooCommerce API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const product = $input.first().json;\n\nif (!product || product.code === 'woocommerce_rest_product_invalid_id') {\n  return {\n    json: {\n      found: false,\n      message: \"âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÏÎ¿ÏŠÏŒÎ½ Î¼Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ ID.\"\n    }\n  };\n}\n\n// Clean HTML from description\nconst cleanDescription = (html) => {\n  return html?.replace(/<[^>]*>/g, '').trim().substring(0, 500) || '';\n};\n\n// Format attributes\nconst attributes = product.attributes?.map(attr => \n  `â€¢ ${attr.name}: ${attr.options?.join(', ') || 'N/A'}`\n).join('\\n') || 'Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬';\n\nconst priceDisplay = product.on_sale \n  ? `~~${product.regular_price}â‚¬~~ **${product.sale_price}â‚¬** ğŸ·ï¸ Î•ÎšÎ Î¤Î©Î£Î—!`\n  : `${product.price}â‚¬`;\n\nconst stockDisplay = product.stock_status === 'instock'\n  ? `âœ… Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿${product.stock_quantity ? ` (${product.stock_quantity} Ï„ÎµÎ¼Î¬Ï‡Î¹Î±)` : ''}`\n  : product.stock_status === 'onbackorder' \n    ? 'â³ ÎšÎ±Ï„ÏŒÏ€Î¹Î½ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚'\n    : 'âŒ Î•Î¾Î±Î½Ï„Î»Î®Î¸Î·ÎºÎµ';\n\nlet message = `ğŸ“¦ **${product.name}**\\n\\n`;\nmessage += `**Î¤Î¹Î¼Î®:** ${priceDisplay}\\n`;\nmessage += `**Î”Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±:** ${stockDisplay}\\n`;\nmessage += `**SKU:** ${product.sku || 'N/A'}\\n\\n`;\n\nif (product.short_description) {\n  message += `**Î£ÏÎ½Ï„Î¿Î¼Î· Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î®:**\\n${cleanDescription(product.short_description)}\\n\\n`;\n}\n\nif (product.attributes?.length > 0) {\n  message += `**Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬:**\\n${attributes}\\n\\n`;\n}\n\nif (product.categories?.length > 0) {\n  message += `**ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚:** ${product.categories.map(c => c.name).join(', ')}\\n`;\n}\n\nmessage += `\\nğŸ”— [Î”ÎµÎ¯Ï„Îµ Ï„Î¿ Ï€ÏÎ¿ÏŠÏŒÎ½](${product.permalink})`;\n\nreturn {\n  json: {\n    found: true,\n    id: product.id,\n    name: product.name,\n    sku: product.sku,\n    price: product.price,\n    regular_price: product.regular_price,\n    sale_price: product.sale_price,\n    on_sale: product.on_sale,\n    stock_status: product.stock_status,\n    stock_quantity: product.stock_quantity,\n    description: cleanDescription(product.description),\n    short_description: cleanDescription(product.short_description),\n    attributes: product.attributes,\n    categories: product.categories?.map(c => c.name),\n    permalink: product.permalink,\n    image: product.images?.[0]?.src,\n    message: message\n  }\n};"
      },
      "id": "format-product-info-response",
      "name": "ğŸ“‹ Format Product Info Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [700, 1800]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {}
      },
      "id": "respond-product-info-tool",
      "name": "ğŸ“¤ Respond Product Info Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 1800]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-create-return",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-return",
      "name": "âš¡ Sub: Create Return Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 2000],
      "webhookId": "tool-create-return"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json.body;\n\n// Generate return request ID\nconst returnId = 'RET-' + Date.now().toString(36).toUpperCase();\n\n// In production, this would:\n// 1. Create a return request in your database/system\n// 2. Send email to customer\n// 3. Notify warehouse/support team\n// 4. Update order meta in WooCommerce\n\nconst returnRequest = {\n  return_id: returnId,\n  order_number: input.order_number,\n  reason: input.reason,\n  product_sku: input.product_sku || 'All items',\n  customer_email: input.customer_email,\n  status: 'pending_review',\n  created_at: new Date().toISOString()\n};\n\nconst message = `âœ… **Î‘Î¯Ï„Î·Î¼Î± Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚ ÎšÎ±Ï„Î±Ï‡Ï‰ÏÎ®Î¸Î·ÎºÎµ**\n\n**Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î‘Î¹Ï„Î®Î¼Î±Ï„Î¿Ï‚:** ${returnId}\n**Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±:** #${input.order_number}\n**Î›ÏŒÎ³Î¿Ï‚:** ${input.reason}\n\nğŸ“§ Î˜Î± Î»Î¬Î²ÎµÏ„Îµ email ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·Ï‚ ÏƒÏ„Î¿ ${input.customer_email} Î¼Îµ Ï„Î¹Ï‚ Î¿Î´Î·Î³Î¯ÎµÏ‚ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚.\n\nâ±ï¸ Î— Î¿Î¼Î¬Î´Î± Î¼Î±Ï‚ Î¸Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÏ„ÎµÎ¯ Ï„Î¿ Î±Î¯Ï„Î·Î¼Î¬ ÏƒÎ±Ï‚ ÎµÎ½Ï„ÏŒÏ‚ 24 Ï‰ÏÏÎ½.\n\nÎ‘Î½ Î­Ï‡ÎµÏ„Îµ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚, Î±Î½Î±Ï†Î­ÏÎµÏ„Îµ Ï„Î¿Î½ Î±ÏÎ¹Î¸Î¼ÏŒ Î±Î¹Ï„Î®Î¼Î±Ï„Î¿Ï‚: **${returnId}**`;\n\nreturn {\n  json: {\n    success: true,\n    return_request: returnRequest,\n    message: message\n  }\n};"
      },
      "id": "process-return-request",
      "name": "ğŸ“‹ Process Return Request",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 2000]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://hooks.slack.com/services/YOUR_SLACK_WEBHOOK",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"text\": \"ğŸ”„ ÎÎ­Î¿ Î‘Î¯Ï„Î·Î¼Î± Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚!\",\n  \"attachments\": [{\n    \"color\": \"#ff9800\",\n    \"fields\": [\n      {\"title\": \"Return ID\", \"value\": \"{{ $json.return_request.return_id }}\", \"short\": true},\n      {\"title\": \"Order #\", \"value\": \"{{ $json.return_request.order_number }}\", \"short\": true},\n      {\"title\": \"Reason\", \"value\": \"{{ $json.return_request.reason }}\", \"short\": false},\n      {\"title\": \"Customer\", \"value\": \"{{ $json.return_request.customer_email }}\", \"short\": true}\n    ]\n  }]\n}",
        "options": {}
      },
      "id": "notify-return-slack",
      "name": "ğŸ“¢ Notify Team - Return",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [700, 2000]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($('ğŸ“‹ Process Return Request').item.json) }}",
        "options": {}
      },
      "id": "respond-return-tool",
      "name": "ğŸ“¤ Respond Return Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 2000]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-stock-alert",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-stock-alert",
      "name": "âš¡ Sub: Stock Alert Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 2200],
      "webhookId": "tool-stock-alert"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json.body;\n\n// Generate alert ID\nconst alertId = 'ALERT-' + Date.now().toString(36).toUpperCase();\n\n// In production, this would:\n// 1. Store the alert in database\n// 2. Set up a trigger when product stock changes\n// 3. Send notification when stock > 0\n\nconst stockAlert = {\n  alert_id: alertId,\n  product_id: input.product_id,\n  customer_email: input.customer_email || null,\n  customer_phone: input.customer_phone || null,\n  notification_method: input.customer_phone ? 'sms' : 'email',\n  status: 'active',\n  created_at: new Date().toISOString()\n};\n\nconst contactMethod = input.customer_phone \n  ? `SMS ÏƒÏ„Î¿ ${input.customer_phone}`\n  : input.customer_email \n    ? `email ÏƒÏ„Î¿ ${input.customer_email}`\n    : 'ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±';\n\nconst message = `ğŸ”” **Î•Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î”Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚ Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ**\n\n**ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ Î•Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚:** ${alertId}\n**Î ÏÎ¿ÏŠÏŒÎ½ ID:** ${input.product_id}\n\nâœ… Î˜Î± ÏƒÎ±Ï‚ ÎµÎ½Î·Î¼ÎµÏÏÏƒÎ¿Ï…Î¼Îµ Î¼Îµ ${contactMethod} Î¼ÏŒÎ»Î¹Ï‚ Ï„Î¿ Ï€ÏÎ¿ÏŠÏŒÎ½ Î³Î¯Î½ÎµÎ¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿!\n\nÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±ÎºÏ…ÏÏÏƒÎµÏ„Îµ Ï„Î·Î½ ÎµÎ¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ ÏƒÏ„Î¹Î³Î¼Î® Î±Î½Î±Ï†Î­ÏÎ¿Î½Ï„Î±Ï‚ Ï„Î¿Î½ ÎºÏ‰Î´Î¹ÎºÏŒ: **${alertId}**`;\n\nreturn {\n  json: {\n    success: true,\n    stock_alert: stockAlert,\n    message: message\n  }\n};"
      },
      "id": "process-stock-alert",
      "name": "ğŸ“‹ Process Stock Alert",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 2200]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($json) }}",
        "options": {}
      },
      "id": "respond-stock-alert-tool",
      "name": "ğŸ“¤ Respond Stock Alert Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [700, 2200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tool-human-transfer",
        "options": {
          "responseMode": "responseNode"
        }
      },
      "id": "sub-webhook-human",
      "name": "âš¡ Sub: Human Transfer Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 2400],
      "webhookId": "tool-human-transfer"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json.body;\n\nconst ticketId = 'TKT-' + Date.now().toString(36).toUpperCase();\n\nconst priorityEmoji = {\n  'low': 'ğŸŸ¢',\n  'medium': 'ğŸŸ¡',\n  'high': 'ğŸŸ ',\n  'urgent': 'ğŸ”´'\n};\n\nconst transferRequest = {\n  ticket_id: ticketId,\n  reason: input.reason,\n  priority: input.priority || 'medium',\n  summary: input.summary,\n  status: 'awaiting_agent',\n  created_at: new Date().toISOString()\n};\n\nconst emoji = priorityEmoji[input.priority] || 'ğŸŸ¡';\n\nconst message = `ğŸ‘¤ **ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬ ÏƒÎµ Î‘Î½Î¸ÏÏÏ€Î¹Î½Î¿ Agent**\n\n**Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Ticket:** ${ticketId}\n**Î ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±:** ${emoji} ${(input.priority || 'medium').toUpperCase()}\n\nğŸ“ ÎˆÎ½Î±Ï‚ ÎµÎºÏ€ÏÏŒÏƒÏ‰Ï€ÏŒÏ‚ Î¼Î±Ï‚ Î¸Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎµÎ¹ Î¼Î±Î¶Î¯ ÏƒÎ±Ï‚ ÏƒÏÎ½Ï„Î¿Î¼Î±.\n\n**Î•ÎºÏ„Î¹Î¼ÏÎ¼ÎµÎ½Î¿Ï‚ Ï‡ÏÏŒÎ½Î¿Ï‚ Î±Ï€ÏŒÎºÏÎ¹ÏƒÎ·Ï‚:**\n${input.priority === 'urgent' ? 'â€¢ âš¡ Î•Î½Ï„ÏŒÏ‚ 15 Î»ÎµÏ€Ï„ÏÎ½' : input.priority === 'high' ? 'â€¢ Î•Î½Ï„ÏŒÏ‚ 1 ÏÏÎ±Ï‚' : 'â€¢ Î•Î½Ï„ÏŒÏ‚ 2-4 Ï‰ÏÏÎ½'}\n\nÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î±Î½Î±Ï†Î­ÏÎµÏ„Îµ Ï„Î¿Î½ Î±ÏÎ¹Î¸Î¼ÏŒ ticket **${ticketId}** Î³Î¹Î± Ï„Î±Ï‡ÏÏ„ÎµÏÎ· ÎµÎ¾Ï…Ï€Î·ÏÎ­Ï„Î·ÏƒÎ·.`;\n\nreturn {\n  json: {\n    success: true,\n    transfer_request: transferRequest,\n    message: message\n  }\n};"
      },
      "id": "process-human-transfer",
      "name": "ğŸ“‹ Process Human Transfer",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 2400]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://hooks.slack.com/services/YOUR_SLACK_WEBHOOK",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"text\": \"ğŸš¨ Human Agent Requested!\",\n  \"attachments\": [{\n    \"color\": \"{{ $json.transfer_request.priority === 'urgent' ? '#dc3545' : $json.transfer_request.priority === 'high' ? '#fd7e14' : '#ffc107' }}\",\n    \"fields\": [\n      {\"title\": \"Ticket ID\", \"value\": \"{{ $json.transfer_request.ticket_id }}\", \"short\": true},\n      {\"title\": \"Priority\", \"value\": \"{{ $json.transfer_request.priority.toUpperCase() }}\", \"short\": true},\n      {\"title\": \"Reason\", \"value\": \"{{ $json.transfer_request.reason }}\", \"short\": false},\n      {\"title\": \"Summary\", \"value\": \"{{ $json.transfer_request.summary }}\", \"short\": false}\n    ]\n  }]\n}",
        "options": {}
      },
      "id": "notify-human-slack",
      "name": "ğŸ“¢ Notify Team - Urgent",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [700, 2400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.stringify($('ğŸ“‹ Process Human Transfer').item.json) }}",
        "options": {}
      },
      "id": "respond-human-tool",
      "name": "ğŸ“¤ Respond Human Tool",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 2400]
    }
  ],
  "connections": {
    "ğŸŒ Webhook - Customer Request": {
      "main": [
        [
          {
            "node": "ğŸ”„ Normalize Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ Webhook - Voice (Vapi)": {
      "main": [
        [
          {
            "node": "ğŸ”„ Normalize Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“± Webhook - SMS (Yuboto)": {
      "main": [
        [
          {
            "node": "ğŸ”„ Normalize Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”„ Normalize Input": {
      "main": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ§  AI Agent": {
      "main": [
        [
          {
            "node": "ğŸ”€ Route by Channel",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ“ Log to Slack",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ“Š Log to Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude Sonnet": {
      "ai_languageModel": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ’¾ Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Check Stock": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Track Order": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Search Products": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Get Product Info": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Create Return": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Stock Alert": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”§ Tool: Human Transfer": {
      "ai_tool": [
        [
          {
            "node": "ğŸ§  AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”€ Route by Channel": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Chat",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“¤ Respond Voice (Vapi)",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ğŸ“± Send SMS Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“± Send SMS Response": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond SMS Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Check Stock Trigger": {
      "main": [
        [
          {
            "node": "ğŸ›’ WooCommerce: Search Products",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ›’ WooCommerce: Search Products": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Format Stock Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Format Stock Response": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Stock Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Track Order Trigger": {
      "main": [
        [
          {
            "node": "ğŸ›’ WooCommerce: Get Order",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ›’ WooCommerce: Get Order": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Format Order Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Format Order Response": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Order Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Search Products Trigger": {
      "main": [
        [
          {
            "node": "ğŸ›’ WooCommerce: Search Catalog",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ›’ WooCommerce: Search Catalog": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Format Search Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Format Search Response": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Search Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Get Product Info Trigger": {
      "main": [
        [
          {
            "node": "ğŸ›’ WooCommerce: Get Product",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ›’ WooCommerce: Get Product": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Format Product Info Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Format Product Info Response": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Product Info Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Create Return Trigger": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Process Return Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Process Return Request": {
      "main": [
        [
          {
            "node": "ğŸ“¢ Notify Team - Return",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“¢ Notify Team - Return": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Return Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Stock Alert Trigger": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Process Stock Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Process Stock Alert": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Stock Alert Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš¡ Sub: Human Transfer Trigger": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Process Human Transfer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ Process Human Transfer": {
      "main": [
        [
          {
            "node": "ğŸ“¢ Notify Team - Urgent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“¢ Notify Team - Urgent": {
      "main": [
        [
          {
            "node": "ğŸ“¤ Respond Human Tool",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "name": "AI Agent",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    },
    {
      "name": "Customer Service",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    },
    {
      "name": "WooCommerce",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    }
  ],
  "triggerCount": 9,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "1"
}
